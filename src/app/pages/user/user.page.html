<ion-header>
  <ion-toolbar color="secondary" *ngIf="!user">
    <ion-title>Connect your account</ion-title>
    <ion-buttons slot="end">
      <ion-button color="primary" (click)="navigateForward()">
        <ion-icon name="arrow-forward-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>

  <ion-toolbar color="secondary" *ngIf="user">
    <ion-title>My Account</ion-title>

    <ion-buttons slot="end">
      <ion-button color="primary" (click)="navigateForward()">
        <ion-icon name="arrow-forward-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="!user">
  <ion-modal trigger="open-modal" (willDismiss)="onWillDismiss($event)">
    <ng-template>
      <ion-header>
        <ion-toolbar color="secondary">
          <ion-buttons slot="start">
            <ion-button (click)="cancel()" color="primary">Cancel</ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>

      <ion-content>
        <div id="login-with-email">
          <h1>Connect with your email</h1>

          <form [formGroup]="credentials" (ngSubmit)="login()">
            <ion-item fill="outline">
              <ion-input
                type="email"
                placeholder="Enter email"
                formControlName="email"
              ></ion-input>
              <ion-note
                slot="error"
                *ngIf="(email!.dirty || email!.touched) && email!.errors"
                >Email is invalid</ion-note
              >
            </ion-item>

            <ion-item fill="outline">
              <ion-input
                type="password"
                placeholder="Enter password"
                formControlName="password"
              ></ion-input>
              <ion-note
                slot="error"
                *ngIf="(password!.dirty || password!.touched) && password!.errors"
                >Password needs to be at least 6 characters</ion-note
              >
            </ion-item>

            <div class="column">
              <ion-button type="button" (click)="register()">
                Create an account
              </ion-button>

              <ion-button
                type="submit"
                fill="outline"
                [disabled]="!credentials.valid"
              >
                Login
              </ion-button>
            </div>
          </form>
        </div>
      </ion-content>
    </ng-template>
  </ion-modal>

  <div id="not-connected">
    <ion-img id="login_img" src="assets/svg/login_undraw.svg" alt=""></ion-img>

    <div class="cta">
      <ion-button fill="outline" (click)="loginWithGoogle()">
        <ion-icon name="logo-google"></ion-icon>
        Continue with Google
      </ion-button>

      <ion-button fill="outline" (click)="loginWithGoogle()">
        <ion-icon name="logo-apple"></ion-icon>
        Continue with Apple
      </ion-button>

      <p>OR</p>

      <ion-button id="open-modal" expand="block">Connect with Email</ion-button>
    </div>
  </div>
</ion-content>

<ion-content *ngIf="user">
  <div class="profile">
    <div class="container">
      <h1>Welcome Jules!</h1>
      <p>Read your favorite news</p>
    </div>
    <img src="" alt="" />
  </div>

  <ion-button (click)="logout()">Logout</ion-button>
</ion-content>
